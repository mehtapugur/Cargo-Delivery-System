<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-auth.js"></script>
  <title>Cargo</title>
</head>
<!--style="background-color: #351E9E;"-->

<body>
  <h1>Cargo</h1>
  <input type="text" id="userName" placeholder="Username">
  <input type="password" id="password" placeholder="Password"><br>
  <button id="login">Login</button><button id="signup">Signup</button><br>
  <button id="newWindow">Open New Window</button>
  <button id="enter">Enter</button>

 <script type="module">

    const electron = require("electron");
    const { ipcRenderer } = require("electron");
    
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyALVsn7nR8-UKOHO9r7ZedcIouYfW8cceE",
      authDomain: "cargo-27f95.firebaseapp.com",
      projectId: "cargo-27f95",
      storageBucket: "cargo-27f95.appspot.com",
      messagingSenderId: "402656272095",
      appId: "1:402656272095:web:a8e050e3c4d871cbe3136a"
    };

    // Initialize Firebase
    //const app = initializeApp(firebaseConfig);
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    let userNameDOM = document.getElementById("userName");
    let passwordDOM = document.getElementById("password");
    let enterDOM = document.getElementById("enter");
    enterDOM.addEventListener("click", () => {
      ipcRenderer.send("key:enter");
    });

    let signup = document.getElementById("signup");
    signup.addEventListener("click", () => {
      console.log("heyomeho<3");
     /* firebase.auth().createUserWithEmailAndPassword(userNameDOM.value, passwordDOM.value).then(() => console.log("oldu be")).catch(function(e){
        console.log(e);
      })*/
      const promise = auth.createUserWithEmailAndPassword(userNameDOM.value, passwordDOM.value).then(() => {
        ipcRenderer.send("key:access");
        console.log("sign e geldi");
      }).catch( e => console.log(e));
    }) 

    let login = document.getElementById("login");
    login.addEventListener("click", () => {
      console.log("logmeho<3");
     /* firebase.auth().createUserWithEmailAndPassword(userNameDOM.value, passwordDOM.value).then(() => console.log("oldu be")).catch(function(e){
        console.log(e);
      })*/
      const prom = auth.signInWithEmailAndPassword(userNameDOM.value, passwordDOM.value).then(() => {
        ipcRenderer.send("key:access");
        console.log("login e geldi");
      }).catch( e => console.log(e));
    })

    /* FIREBASE YÜKLEMEDEN ÖNCEKİ HALİ

    const electron = require("electron");
    const { ipcRenderer } = require("electron");

    let userNameDOM = document.getElementById("userName");
    let login = document.getElementById("login");
    let signup = document.getElementById("signup");
    let newWindowDOM = document.getElementById("newWindow");

    //inputa girilen değeri backend e gönderiyoruz
    login.addEventListener("click", () => {
      ipcRenderer.send("key:userNameDOM", userNameDOM.value);
      console.log("yes");
    })

    
    signup.addEventListener("click", () => {
      ipcRenderer.send("key:userNameDOM", userNameDOM.value);
      console.log("sign");
    })

    //butona basılınca newWindow adında bir event yayıyoruz
    newWindowDOM.addEventListener("click", () => {
      ipcRenderer.send("key:newWindow");
    })
    */
  </script>

</body>

</html>
